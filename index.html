<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Treep index</title>
    <link rel="stylesheet" href="css/jquery.mobile.css">
    <link rel="stylesheet" href="css/treep.css">
    <script src="js/jquery.js"></script>
    <script src="js/jquery.mobile.js"></script>
    <script type="text/javascript" src="treep.js"></script>
    <script>
    $(document).ready(function(){
        $.ajax({
            type:"GET",
            //url:"test.txt",
            url:"http://121.199.29.125:3004/list",
            dataType:"json",
            success:function(data){
                var music="";
                //i表示在data中的索引位置，n表示包含的信息的对象
                $.each(data,function(i,n){
                    //获取对象中属性为optionsValue的值
                    music+='<li><a href=detail.html?'+n["_id"]+'><h2>'+n["title"]+'</h2><p>级别'+n["grade"]+'</p></a></li>';
                });
                $('#result').append(music);
                $('#result').listview('refresh');
            }
        });
    });
    </script>
</head>
<body>
<div data-role="page" data-quicklinks="true">
    <div data-role="header" data-theme="a">
        <a href="#mainPanel" data-role="button"
           data-icon="bars"
           data-iconpos="notext"
           data-theme="a"
           data-inline="true">菜单</a>
        <h1>列表</h1>
        <a href="search.html" data-role="button" data-icon="search" data-iconpos="notext"
           data-transition="slidefade" >搜索</a>
    </div>
    <div data-role="content">
        <ul id="result" data-role="listview" data-icon="false">
            <!--li>
                <a href="detail.html?123" >
                    <img src="css/images/shanghai.jpg">
                    <h2>香格里拉</h2>
                    <p>级别：AAAA</p>
                </a>
            </li-->
        </ul>
    </div>

    <div data-role="panel" id="mainPanel" data-theme="a" data-position="left" display=“push”>
        <ul>
            <li>旅游伴侣</li>
            <li>景点</li>
        </ul>
    </div>
</div>
</body>
</html>